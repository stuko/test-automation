-- Not used META 
SELECT REF_ID , REF_ITM_ID , REF_ITM_NM  
FROM KAIS52_REF_ITM
WHERE REF_ITM_ID  NOT IN (SELECT MET_DAT_SET_ITM_ID FROM KAIS21_MET_DAT_SET_ITM_DTL)
ORDER BY REF_ID 

-- ITEM 이름은 같으나, 타입이 다른 경우
SELECT A.REF_ID ,A.REF_ITM_ID ,A.REF_ITM_DAT_TP, B.REF_ID ,B.REF_ITM_DAT_TP
FROM (SELECT REF_ID , REF_ITM_ID , ref_itm_dat_tp FROM KAIS52_REF_ITM) A,
	 (SELECT REF_ID , REF_ITM_ID , ref_itm_dat_tp FROM KAIS52_REF_ITM) B 
WHERE A.REF_ITM_ID = B.REF_ITM_ID
AND   A.REF_ITM_DAT_TP != B.REF_ITM_DAT_TP 
AND (
		(
			A.ref_itm_dat_tp IN ('NUM','ITG') 
			AND 
			B.ref_itm_dat_tp IN ('STR')
		)    
		OR 
		(
			A.ref_itm_dat_tp IN ('STR') 
			AND 
			B.ref_itm_dat_tp IN ('NUM','ITG')
		)    
	)
GROUP BY A.REF_ID ,A.REF_ITM_ID ,A.REF_ITM_DAT_TP, B.REF_ID ,B.REF_ITM_DAT_TP  

-- 전략에 참조 객체 없는 경우
SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT TREE_ID FROM KAIS00_TREE_MAIN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT REF_ID FROM KAIS52_REF_ITM)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_MAIN_OBJ_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS60_STGY_SET_MAIN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS61_STGY_SET_LNK_OBJ)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS61_STGY_SET_OBJ)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_DCS_FUNC_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_DCS_OBJ_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_DCS_SCRT_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_FORK_OBJ_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_MAIN_OBJ_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS65_ENTRY_ACT_ITM_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS65_ENTRY_MAIN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS50_SCOR_CRD_MAIN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS51_SCOR_CRD_SEG)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS53_SCOR_CRD_SEG_SPRT_CND)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS53_SCOR_CRD_SEG_US_ITM)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS54_SCOR_CRD_BINN_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS54_SCOR_CRD_DYNAMIC_ITEM)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS55_SCOR_CRD_GD_RULE)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS55_SCOR_CRD_GD_RULE_DTL)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT SCOR_CRD_ID FROM KAIS57_SCOR_CRD_RSN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT TREE_ID FROM KAIS00_TREE_MAIN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT REF_ID FROM KAIS52_REF_ITM)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS62_MAIN_OBJ_DTL)

SELECT * FROM KAIS62_MAIN_OBJ_DTL

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS60_STGY_SET_MAIN)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS61_STGY_SET_LNK_OBJ)

SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN (SELECT STGY_SET_ID FROM KAIS61_STGY_SET_OBJ)

-- 전략에 참조 객체 없는 경우
SELECT * FROM KAIS60_STGY_SET_MAIN 
WHERE STGY_SET_ID NOT IN 
(
 SELECT STGY_SET_ID FROM KAIS62_DCS_FUNC_DTL
 UNION ALL 
 SELECT STGY_SET_ID FROM KAIS62_DCS_OBJ_DTL
 UNION ALL 
 SELECT STGY_SET_ID FROM KAIS62_DCS_SCRT_DTL
 UNION ALL 
 SELECT STGY_SET_ID FROM KAIS62_FORK_OBJ_DTL
 UNION ALL 
 SELECT STGY_SET_ID FROM KAIS62_MAIN_OBJ_DTL
 UNION ALL 
 SELECT STGY_SET_ID FROM KAIS65_ENTRY_ACT_ITM_DTL
 UNION ALL 
 SELECT STGY_SET_ID FROM KAIS65_ENTRY_MAIN
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS50_SCOR_CRD_MAIN
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS51_SCOR_CRD_SEG
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS53_SCOR_CRD_SEG_SPRT_CND
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS53_SCOR_CRD_SEG_US_ITM
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS54_SCOR_CRD_BINN_DTL
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS54_SCOR_CRD_DYNAMIC_ITEM
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS55_SCOR_CRD_GD_RULE
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS55_SCOR_CRD_GD_RULE_DTL
 UNION ALL 
 SELECT SCOR_CRD_ID FROM KAIS57_SCOR_CRD_RSN
 )


/*전략셋 메인*/ 
SELECT * FROM KAIS60_STGY_SET_MAIN
WHERE STGY_SET_ID  = 'SS00000031'
-- 서브 전략 : STGY_SET_DS  = 1
-- 메인 전략 : STGY_SET_DS  = 2

/*전략셋에 사용된 오브젝트*/
SELECT * FROM KAIS61_STGY_SET_OBJ
WHERE STGY_SET_ID  = 'SS00000082'
-- SELECT * FROM KAIS60_STGY_SET_MAIN WHERE STGY_SET_ID  = 'SS00000220'
/*메인 전략에 사용되는 서브셋과 스코어 카드에 사용되는 항목정보*/
SELECT * FROM KAIS62_MAIN_OBJ_DTL
WHERE STGY_SET_ID = 'SS00000014'

/*
ST : 시작
DF : 의사결정 함수 KAIS62_DCS_FUNC_DTL
SS : 전략셋
ED : 종료
DT : 의사결정 테이블 KAIS62_DCS_OBJ_DTL (DM/TR/DT)
FK : 분기 KAIS62_FORK_OBJ_DTL
DM : 의사결정 매트릭스 KAIS62_DCS_OBJ_DTL (DM/TR/DT)
TR : 의사결정 노드 KAIS62_DCS_OBJ_DTL (DM/TR/DT)
DS : 의사결정 스크립트 KAIS62_DCS_SCRT_DTL
SC : 스코어카드
 */

/*의사결정 함수*/
SELECT * FROM KAIS62_DCS_FUNC_DTL
WHERE STGY_SET_ID  = 'SS00000082'

/*의사결정 노드*/
SELECT *  FROM KAIS62_DCS_OBJ_DTL
WHERE STGY_SET_ID  = 'SS00000082'

/*의사결정 스크립트*/
SELECT *  FROM KAIS62_DCS_SCRT_DTL
WHERE STGY_SET_ID  = 'SS00000082'

/*분기*/
SELECT * FROM KAIS62_FORK_OBJ_DTL
WHERE STGY_SET_ID  = 'SS00000089'

/* DM/TR/DT 에서 사용하는 Action 아이템 */
SELECT * FROM KAIS65_ENTRY_ACT_ITM_DTL
WHERE STGY_SET_ID  = 'SS00000089'

/* DM/TR/DT 에서 사용하는 엔트리 메인 */
SELECT *  FROM KAIS65_ENTRY_MAIN

/* 스코어카드 메인 */
SELECT * FROM KAIS50_SCOR_CRD_MAIN

---------------------------------------------------

/* 스코어카드 세그먼트 */
SELECT * FROM KAIS51_SCOR_CRD_SEG

-- 나중에 분석
 SELECT * FROM KAIS53_SCOR_CRD_SEG_SPRT_CND
 SELECT SCOR_CRD_ID FROM KAIS53_SCOR_CRD_SEG_US_ITM
 SELECT SCOR_CRD_ID FROM KAIS54_SCOR_CRD_BINN_DTL
 SELECT SCOR_CRD_ID FROM KAIS54_SCOR_CRD_DYNAMIC_ITEM
 SELECT SCOR_CRD_ID FROM KAIS55_SCOR_CRD_GD_RULE
 SELECT SCOR_CRD_ID FROM KAIS55_SCOR_CRD_GD_RULE_DTL
 SELECT SCOR_CRD_ID FROM KAIS57_SCOR_CRD_RSN

-- 의사결정 함수 중에 전략셋과 연결되지 않는 객체 검색
SELECT A.STGY_SET_ID , A.OBJ_TP , A.OBJ_ID ,B.STGY_SET_ID , B.OBJ_TP , B.OBJ_ID  
FROM KAIS61_STGY_SET_OBJ A LEFT OUTER JOIN KAIS62_DCS_FUNC_DTL B 
	 ON A.STGY_SET_ID  = B.STGY_SET_ID 
	 AND A.OBJ_TP = B.OBJ_TP 
	 AND A.OBJ_ID = B.OBJ_ID 
WHERE A.OBJ_TP  IN ('DF')
AND   B.OBJ_ID IS NULL

-- 의사결정 매트릭스/테이블/트리 중에 전략셋과 연결되지 않는 객체 검색
SELECT A.STGY_SET_ID , A.OBJ_TP , A.OBJ_ID ,B.STGY_SET_ID , B.OBJ_TP , B.OBJ_ID  
FROM KAIS61_STGY_SET_OBJ A LEFT OUTER JOIN KAIS62_DCS_OBJ_DTL B 
	 ON A.STGY_SET_ID  = B.STGY_SET_ID 
	 AND A.OBJ_TP = B.OBJ_TP 
	 AND A.OBJ_ID = B.OBJ_ID 
WHERE A.OBJ_TP IN ('DM','TR','DT')
AND   B.OBJ_ID IS NULL 

-- 의사결정 분기 중에 전략셋과 연결되지 않는 객체 검색
SELECT A.STGY_SET_ID , A.OBJ_TP , A.OBJ_ID ,B.STGY_SET_ID , B.OBJ_TP , B.OBJ_ID  
FROM KAIS61_STGY_SET_OBJ A LEFT OUTER JOIN KAIS62_FORK_OBJ_DTL B 
	 ON A.STGY_SET_ID  = B.STGY_SET_ID 
	 AND A.OBJ_TP = B.OBJ_TP 
	 AND A.OBJ_ID = B.OBJ_ID 
WHERE A.OBJ_TP IN ('FK')
AND   B.OBJ_ID IS NULL 

-- 의사결정 스크립트 중에 전략셋과 연결되지 않는 객체 검색
SELECT A.STGY_SET_ID , A.OBJ_TP , A.OBJ_ID ,B.STGY_SET_ID , B.OBJ_TP , B.OBJ_ID  
FROM KAIS61_STGY_SET_OBJ A LEFT OUTER JOIN KAIS62_DCS_SCRT_DTL B 
	 ON A.STGY_SET_ID  = B.STGY_SET_ID 
	 AND A.OBJ_TP = B.OBJ_TP 
	 AND A.OBJ_ID = B.OBJ_ID 
WHERE A.OBJ_TP IN ('DS')
AND   B.OBJ_ID IS NULL 

-- 의사결정 함수 중에 전략셋과 연결되지 않는 객체 검색
SELECT A.STGY_SET_ID , A.OBJ_TP , A.OBJ_ID ,B.STGY_SET_ID , B.OBJ_TP , B.OBJ_ID  
FROM KAIS61_STGY_SET_OBJ A LEFT OUTER JOIN KAIS62_DCS_SCRT_DTL B 
	 ON A.STGY_SET_ID  = B.STGY_SET_ID 
	 AND A.OBJ_TP = B.OBJ_TP 
	 AND A.OBJ_ID = B.OBJ_ID 
WHERE A.OBJ_TP IN ('DS')
AND   B.OBJ_ID IS NULL 


-- 스코어카드/전략셋 중에 전략셋과 연결되지 않는 객체 검색
SELECT A.STGY_SET_ID , A.OBJ_TP , A.OBJ_ID ,B.STGY_SET_ID , B.OBJ_TP , B.OBJ_ID  
FROM KAIS61_STGY_SET_OBJ A LEFT OUTER JOIN KAIS62_MAIN_OBJ_DTL B 
	 ON A.STGY_SET_ID  = B.STGY_SET_ID 
	 AND A.OBJ_TP = B.OBJ_TP 
	 AND A.OBJ_ID = B.OBJ_ID 
WHERE A.OBJ_TP IN ('SS','SC')
AND   B.OBJ_ID IS NULL 
